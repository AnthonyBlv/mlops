name: Test Pipeline

on: [push]

jobs:
  Explore_Github_Actions:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - run: docker compose up -d ml_model
    - run: docker tag ml_model ${{ secrets.DOCKER_USERNAME }}/ml_model:latest
    - run: docker login -u ${{ secrets.DOCKER_USERNAME }} -p ${{ secrets.DOCKER_PASSWORD }}
    - run: docker push ml_model
    - run: ssh ubuntu@17.2.2.1
    - run: docker pull ml_model
    - run: docker run ml_model